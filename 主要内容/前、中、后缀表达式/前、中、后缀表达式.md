# 前、中、后缀表达式

2018.06.07  作者：王樾

---

## 中缀表达式

其实就是我们日常生活中见到的表达式。比如$6+5(4+5*2)-1$。

中缀表达式对于人是较容易理解的，但是对于计算机就不同了。

因为不同运算符有不同的运算优先级，计算机是无法用一个规范的算法程序解读出一个中缀表达式的。

那什么表达式可以方便计算机读取表达式呢？

答案就是：使用**前缀表达式**或者**后缀表达式**。

这里主要介绍后缀表达式。

## 后缀表达式

我先直接给出上面这个$6+5(4+5*2)-1$的后缀表达式：

`6 5 4 5 2 * + * + 1 -`

后缀表达式的一个特点就是：**没有括号！也没有任何的运算符优先级！**

在后缀表达式中，当你读到一个运算符的时候，请看到它前面的两个数（也许是已经计算好的中间结果），用这个运算符对前面这两个数做运算。

运算后的数，就将它原封不动地放在原来的地方，这个数会参加接下来的运算。

接下来让我们对这个表达式一层一层地展开：

```
6 5 4 5 2 * + * + 1 -
6 5 4 10 + * + 1 -
6 5 14 * + 1 -
6 70 + 1 -
76 1 -
75
```

不如跟着按下计算器，是不是对的呢？

在后缀表达式中，**众生平等！**任何运算符在后缀表达式中没有优先级。

对电脑来说，求一个中缀表达式的时候，一般就要将它转化为后缀表达式，接下来对它进行求值，就可以简便地求出表达式的值。

## 怎么实现中缀表达式转化为后缀表达式

有一种方法是运用表达式树，但是我这里不详细介绍。想要了解的同学可以直接找blog看，自学是很重要的素质。

这里着重讲述运用**栈**的方法。

### 栈

首先一定要介绍下栈这种数据结构！

栈(stack)是一种线性数据结构。所谓线性就是内存是连续的吧。

支持push和pop操作。并且有以下规定：后进先出(First In First Out, FIFO)。

在生活能找到许多栈的应用：

算法的详细介绍如下：

- 先直接一行读入我们的表达式。

-  接下来进行字符串的遍历。

- 若读到的字符是数字，就试着将整个数字读完。读完整个数字之后**直接输出**！

- 若读到的字符是运算符，则根据运算符优先级，将栈底下的所有运算优先级高于或等于的运算符弹出。

- 运算符要注意括号的优先级：左括号在栈外优先级最高（直接入栈即可），但在栈内优先级最低（别的运算符可以直接入栈）。

- 读到右括号的时候，保持出栈，同时输出。读到左括号为止，**但是左括号不输出**。

- 字符串遍历后，可能栈内还有剩余，只要依次弹出知道栈为空即可。

后缀表达式也叫做逆波兰式，因为跟波兰式是反过来的。

所谓波兰式就是**前缀表达式**。

## 前缀表达式

这里对前缀表达式也只提供感性理解。

跟后缀表达式恰恰相反，它的运算符在前面，跟紧跟在后面的两个数字发生关系，参与运算。

将$6+5(4+5*2)-1$变成前缀表达式就是：

```
- + * + * 5 2 4 5 6 1
- + * + 10 4 5 6 1
- + * 14 5 6 1
- + 70 6 1
- 76 1
75
```

将这个前缀表达式等价变换，得到`- 1 + * + * 5 2 4 5 6`。

跟前面得到的后缀表达式：`6 5 4 5 2 * + * + 1 -`比较。

**恰好是相反的！**

运算符在前面的就是前缀表达式，在后面的就是后缀了。

一般用到的是后缀表达式，因为实现方便。

## 后面的话

初赛范围中，应该学会前、中、后缀表达式的相互转换，不需要转化为程序语言，只需要感性理解就可以了。

如果想有更深刻的理解，则可以试着将这种算法实现为代码。这是锻炼码力的好题目。

---

再见！